# 常见问题

---

##### 0、UCloudStack 是否支持 Oracle 及 RAC ？

首先 Oracle 目前并未承认除 VMWare 以外的虚拟化环境运行 Oracle 数据库，即安装在其它虚拟化环境下的 Oracle 数据库可能不提供 Oracle 官方技术支持，客户需要自行评估风险。

##### 1、UCloudStack 最小规模需要多少硬件设备？

UCloudStack 生产环境最小规模需要 3 台计算节点服务器、1 台管理节点服务器 及 1 台交换机。

3 台计算节点服务器是为了保证分布式存储 3 副本；1 台管理节点为单点，生产环境建议配置 2 台管理节点 ；1 台交换机为单点，生产环境建议配置 2 台交换机。

> 管理节点支持部署于计算节点服务器或虚拟机中，若物理服务器资源紧张，可省去管理节点服务器。

##### 2、UCloudStack 测试环境需要多少硬件设备？

测试环境 1 台服务器即可部署完整的 UCloudStack 平台；网络设备仅需要一台交换机或一个交换机接口。若需要测试平台整体功能及相关指标，建议至少部署 2~3 台服务器节点。

##### 3、UCloudStack 会限制硬件设备品牌吗？

UCloudStack 不限制服务器及交换机的品牌和型号，支持虚拟化的 x86 服务器和通用二层 & 三层交换机即可。

##### 4、若不需要外网服务应该如何架建 UCloudStack 网络？

若云平台不需要提供外网服务，则可省去外网区域的交换机，同时服务器仅需 2 个网口接入内网接入交换机。

##### 5、UCloudStack 服务器节点最少需要几个网口？

推荐的标准方案为全平台高可用架构，内外网分别需要 2 个网口做双网卡绑定 ( Bond ），即需要 4 个网口。

若不需要外网服务，则可以省去 2 个网口，仅需要 2 个网口接入内网接入交换机；若不需要网卡冗余，则可以省去 2 个网口，仅需要 2 个网口分别接入内网和外网。

> 服务器网络支持配置 Vlan ，即仅需要 2  个网口做双网卡 Bond4 上联至交换机接口（配置为 Trunk），同时支持内外网服务。

##### 6、服务器节点是否可以全配置为千兆网络接口？

可以，标准方案中推荐内网用万兆接口及万兆交换机是基于对性能的考虑，若运行在虚拟机的业务对性能要求不高，可采用全千兆链路组网。

##### 7、UCloudStack 最大规模支持多少台服务器节点？

标准网络方案内外网分别一组核心交换机，最大支持 900 台节点。如增加核心接入交换机，则可扩展更多服务器节点。

##### 8、实际环境中，最少需要几台管理节点？

仅需要 1~2 台管理节点即可，或不考虑 HA 高可用，则 1 台即可。UCloudStack 平台具有业务实现分离的技术特性，即管理节点仅承载帐户认证、计量计费、资源管理、智能调度、API-Gateway 及服务监控等北向接口。

承载虚拟机、云硬盘、VPC 网络、EIP、负载均衡等业务实现的南向接口均部署于计算节点，虚拟机间通信及数据转发不会经过管理节点，大大降低了管理节点的负载，因此 1 台管理节点可管理成百上千台计算节点。

> 管理节点支持部署于计算节点服务器或虚拟机中，若物理服务器资源紧张，可省去管理节点服务器。

##### 9、基础监控节点是否为必选节点？

否，基础监控节点是 UCloudStack 外围监控，用于监控云平台接入的所有网络设备、服务器、磁盘阵列等硬件设备及集群中 MySQL、Redis、MongoDB 等常用服务的监控和告警。

同时基础监控节点还可以监控 UCloudStack 平台以外的物理服务器及硬件设备。若用户已有基础监控平台，则不需要额外搭建基础监控节点。

##### 10、计算存储超融合节点与独立存储节点的区别？

计算存储超融合节点同时集成了计算和存储的能力，即云平台分布式存储直接使用每台计算节点的磁盘，同时承载虚拟机和云硬盘服务；独立存储节点仅提供分布式存储能力，仅部署分布式存储系统。

计算存储超融合节点需承载计算服务，CPU 和内存配置较高；独立存储节点仅提供分布式存储服务，CPU 和 内存配置较低，但磁盘容量一般较大。

##### 11、托管网关节点有什么作用，一般需要几台？

托管网关节点提供 UCloudStack 与物理 IDC 环境的混合云通道，用于打通虚拟网络（Overlay）和物理网络（Underlay），通过托管网关节点，物理区域数据库服务器可直接与云平台虚拟机进行通信，适用于利旧物理服务器托管业务场景。

托管网关节点为**可选**节点，一般由 2 台服务器通过 HA 的方式部署，保证托管网关的高可用；或将托管网关节点直接部署于计算节点中，不占用独立服务器节点。

##### 12、实际环境中，是否可以省掉托管网关接入交换机？

标准方案建议为托管网关节点配备 2 台托管网关接入交换机，用于承载托管网关服务器业务数据传输。

实际环境中，**根据需求可以省掉托管网关接入交换机**，直接将托管网关服务器接入内网接入交换机或内网核心交换机。

若托管网关服务部署于计算节点，则托管网关接入交换机及托管网关服务器均可省去，直接使用计算节点的资源提供混合云网关服务。

##### 13、通用网络架构中是否可以省掉 4 台核心交换机？

可以，若业务规模较小（ 48 节点内 ），可省掉 4 台核心交换机，采用 2 组 共 4 台接入交换机分别承载 UCloudStack 内网和外网。

若无内外网物理隔离强需求，仅需 2 台交换机即可承载云平台内外网服务。

##### 14、计算/存储节点是否必须配置 RAID5 后再部署分布式存储吗？

否， RAID5 只是一个运营方案，实际项目中可根据需求判断是否配置 RAID5 。 UCloudStack 底层存储采用 Ceph 方案，当损坏一块磁盘时，Ceph 会同步已损坏磁盘的数据副本，会为 Ceph 整体性能带来性能波动。

为避免损坏一块磁盘带来的性能波动，先将磁盘分组做 RAID5 在做分布式存储，一个 RAID5 对于 Ceph 就是一个 OSD ；当一块磁盘损坏时，由于 RAID5 的原因，Ceph 不会感知磁盘损坏，无需同步数据副本，一定程度上保证性能。

##### 15、托管网关和 NAT 网关的区别？

托管网关是用于打通虚拟网络和物理网络，使物理网络服务器通过内网与 VPC 网络的虚拟机通信。

NAT 网关用于多个虚拟机共享一个 EIP 的应用场景，节省公网 IP 地址的同时，提供 DNAT 等功能。

##### 16、虚拟机和云硬盘是否有备份功能？

虚拟机可以通过导出为镜像进行备份。云硬盘暂无备份功能， 2019 年 Q2 将提供云硬盘快照功能。

##### 17、SATA 和 SSD/NVME 节点的配比应该如何规划？

UCloudStack 一台计算/存储节点仅支持部署一种类型的磁盘，SATA（普通盘）节点和 SSD/NVME（高性能盘）节点的配比取决于业务特征，如数据库服务较多的业务，则需要配置更多的 SSD 节点。

##### 18、UCloudStack 是否支持资源超分（超卖/超售）？

UCloudStack 支持 CPU 资源超分，不支持内存和磁盘超分。CPU 超分比一般需要根据平台业务特征进行设置，通常建议不超过 2 倍。

##### 19、UCloudStack 推荐的服务器配置可以进行变更吗？

否，由于推荐的服务器均为公司统一集采，随意变更配置（如添加一块磁盘、一张网卡等）可能会影响价格、交付时间及维保等问题。如必须变更配置，可联系相关人员提前申请。

##### 20、UCloudStack POC 在线测试和本地部署服务器测试有什么区别？

在线 POC 可测试租户界面有关计算、存储、网络、监控、日志、子帐号等最终用户的功能性测试及易用性测试。

本地部署服务器测试更多可以测试平台整体运维运营及权限管理等管理员功能，包括物理机、物理网络、物理存储的资源管理、帐户管理、平台配置、计费定价财务管理、平台整体资源利用率、整体监控、日志等；

同时本地部署服务器测试还可以测试平台集群的稳定性、可靠性及安全性，如宕机测试、在线迁移、故障切换、数据恢复等。





